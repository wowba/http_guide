# 3. HTTP 메시지

## 3.1 메시지의 흐름
- HTTP 어플리케이션 간 주고받는 HTTP 메세지는 데이터 덩어리이다.

- ### 3.1.1 인바운드 / 아웃바운드
  - 트랜잭션 방향을 표현할 때 인바운드 / 아웃바운드 라는 용어를 활용한다.
![image](https://user-images.githubusercontent.com/87873821/220694731-d25a8c16-8f27-4fd6-a263-30a9197f3c99.png)

- ### 3.1.2 업스트림 / 다운스트림
  - HTTP 메시지는 무조건 발송자가 **업스트림**, 수신자가 **다운스트림**이다.
  - HTTP 메시지는 무조건 업스트림 에서 다운스트림 으로 흐른다.
![image](https://user-images.githubusercontent.com/87873821/220697152-f0a8f3be-1b6b-4717-8f2d-ff880dd80ca9.png)

## 3.2 메시지의 각 부분
- HTTP 메시지는 단순한 데이터의 블록이며 요청 혹은 응답 둘 중 하나이다.
- 메시지는 시작줄, 헤더 블록, 본문 세 요소로 이루어진다.
  - **시작줄** : 어떤 메시지 인지 서술
  - **헤더 블록** : 메시지의 속성
  - **본문** : 메시지의 데이터. 없을 수도 있다.

- ### 3.2.1 메시지 문법
  - **요청 메시지 형식**
    ```
    <메서드> <요청 URL> <버전> - 시작줄
    <해더> - 헤더블록

    <엔티티 본문> - 본문
    ```
  - **응답 메시지 형식**
    ```
    <버전> <상태 코드> <사유 구절> - 시작줄
    <해더> - 헤더블록

    <엔티티 본문> - 본문
    ```
- ### 3.2.2 시작줄  
  - **메서드** : 클라이언트가 서버에게 해당 리소스에 대해 수행해주길 바라는 동작
  - **요청 URL** : 요청 대상 리소스를 지칭하는 URL
  - **버전** : HTTP 메시지에서 사용중인 HTTP 버전
  - **상태코드** : 요청 처리중 어떤 일(성공, 실패 등)이 발생했는지 나타냄
  - **사유 구절** : 상태 코드를 사람이 쉽게 이해하기 위해 존재. 상태코드 이후, 줄바꿈 이전까지가 사유 구절
  - **헤더** : 0개 이상 존재, 헤더 목록은 빈 줄로 끝나 헤더 목록의 끝과 엔티티 본문의 시작을 표시한다.
  - **엔티티 본문** : 임의의 데이터 블록을 포함한다. 엔티티 본문이 없어도 HTTP 헤더는 항상 빈 줄로 끝난다.
  - **응답줄** : 수행 결과에 대한 상태 정보와 결과 데이터를 클라이언트에게 돌려준다.
  - **메서드** : 요청 시작줄은 메서드로 시작하며 메서드는 서버에게 어떤 동작을 요청하는지 말해준다.
  - **상태코드** : 상태코드는 클라이언트에게 요청 후 결과를 말해주며, 응답 메세지의 시작줄에 담간다.
  - **사유구절** : 응답 시작줄의 마지막 요소이며, 상태 코드를 간단하게 설명한다.
  - **버전번호** : 요청, 응답 메세지 양쪽에 기술하며, HTTP 어플리케이션이 자신이 사용하는 HTTP 버전을 보여준다.

- ### 3.2.3 헤더
  -  HTTP 헤더 필드는 요청과 응답 메세지에 추가 정보를 더한다. 기본적으로 이름/값 한 쌍으로 이루어져 있다. 
  - **헤더 분류**
    - **일반 헤더** : 요청과 응답 양쪽에 모두 나타남
    - **요청 헤더** : 요청에 대한 부가 정보 제공
    - **응답 헤더** : 응답에 대한 부가 정보 제공
    - **Entity 헤더** : 본문 크기와 콘텐츠, 혹은 리소스 그 자체를 서술
    - **확장 헤더** : 명세에 정의되지 않은 새로운 헤더
- ### 3.2.4 엔티티 본문
  - 엔티티 본문은 여러 종류의 디지털 데이터를 전달할 수 있다.
  - HTTP 0.9 버전에서는 요청 메세지는 단순히 메서드와 URL, 응답 메세지는 엔티티 본문 으로만 이루어져 있었다.
## 3.3 메서드
- ### 3.3.1 안전한 메서드 (Safe Method)
  - HTTP는 안전한 메서드라 불리는 메서드의 집합을 정의한다. 이는 GET, HEAD 메서드를 요청시 서버에 어떤 작용도 없음을 의미한다.
  - 안전한 메서드가 서버에 아무 영향을 주지 않는다는 보장은 할 수 없지만, 안전한 메서드의 목적은 서버에 안좋은 영향을 미칠 수 있는 메서드가 사용될 때
  이를 경고할 수 있는 HTTP 어플리케이션을 만들 수 있도록 하는것에 있다.
  - # 아래 내용 추가작성!
  - GET
  - HEAD
  - PUT
  - POST
  - TRACE
  - OPTIONS
  - DELETE
- ### 3.3.9 확장 메서드
  - HTTP는 필요에 따라 확장해서 사용할 수 있으므로, 확장 메서드를 추가해서 사용할 수 있다.
## 3.4 상태 코드
- HTTP 상태 코드는 크게 5가지로 나눌 수 있고, 상태 코드를 통해 트랜잭션을 이해할 수 있다.
- ### 3.4.1 100~199 정보성 상태 코드
  - 정보성 상태 코드는 HTTP/1.1 에서 도입되었다.
  
| 상태 코드 | 사유 구절 | 의미 |
| -- | -- | -- |
| 100 | Continue | ㅁㄹ |
| 101 | Switching Protocols | ㅁㄹ | 

- ### 3.4.2 200~299 성공 상태 코드
  - 클라이언트의 요청이 성공시, 서버는 성공을 의미하는 다양한 상태 코드 배열을 가지고 있다.

| 상태 코드 | 사유 구절 | 의미 |
| -- | -- | -- |
| 200 | OK | ㅁㄹ |
| 201 | Created | ㅁㄹ | 
| ... | ... | ... | 
